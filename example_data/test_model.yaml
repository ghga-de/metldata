id: https://w3id.org/GHGA-Metadata-Schema
name: GHGA-Metadata-Schema
description: >-
  The metadata schema for the German Human Genome-Phenome Archive (GHGA).
version: 0.9.0
imports:
  - linkml:types

prefixes:
  linkml: https://w3id.org/linkml/
  GHGA: https://w3id.org/GHGA/

default_prefix: GHGA

default_range: string

subsets:
  restricted:
    description: |
      Subset of properties that are considered to be restricted.
      Every property that is not marked as restricted can be seen as public.

classes:
  named thing:
    abstract: true
    description: >-
      A databased entity, concept or class. This is a generic class that is the root
      of all the other classes.
    slots:
      - accession
      - alias
    slot_usage:
      accession:
        required: true
      alias:
        required: true

  material entity:
    is_a: named thing
    abstract: true
    description: >-
      A material entity is a physical entity that is spatially extended, exists as a
      whole at any point in time and has mass.

  investigation:
    is_a: named thing
    abstract: true
    description: >-
      Investigation is the process of carrying out a plan or procedure so as to discover
      fact or information about the object of study.

  experiment:
    is_a: investigation
    description: >-
      An experiment is an investigation that consists of a coordinated set of
      actions and observations designed to generate data with the goal of verifying,
      falsifying, or establishing the validity of a hypothesis.
    slots:
      - type
      - has sample
      - has file
    slot_usage:
      type:
        description: >-
          The type of Experiment.
        required: true
      has sample:
        description: >-
          The Sample entity associated with this Experiment.
        range: sample
        multivalued: true
        required: true
        inlined: false
      has file:
        description: >-
          One or more Files entities that are generated as output of this Experiment.
        range: file
        multivalued: true
        required: true
        inlined: false

  sample:
    is_a: named thing
    description: >-
      A sample is a limited quantity of something to be used for testing, analysis,
      inspection, investigation, demonstration, or trial use. A sample is prepared from
      a Biospecimen (isolate or tissue).
    slots:
      - name
      - description
    slot_usage:
      alias:
        required: true
      name:
        description: >-
          Name of the sample (eg:GHGAS_Blood_Sample1 or GHGAS_PBMC_RNAseq_S1).
        required: true
      description:
        description: >-
          Short textual description of the sample
          (How the sample was collected, sample source,
          protocol followed for processing the sample etc).
        required: true

  file:
    is_a: named_thing
    aliases: ["file object"]
    description: >-
      A file is an object that contains information generated from a process, either an
      Experiment or an Analysis.
    slots:
      - filename
      - format
      - size
      - checksum
    slot_usage:
      alias:
        required: true
      filename:
        required: true
        in_subset:
          - restricted
      format:
        required: true
      checksum:
        required: true
      size:
        required: true

  dataset:
    is_a: named thing
    description: >-
      A Dataset is a collection of Files that is prepared for distribution
      and is tied to a Data Access Policy.
    slots:
      - has file
    slot_usage:
      has file:
        description: >-
          One or more File entities that collectively are part of this Dataset.
        range: file
        required: true
        multivalued: true
        inlined: false

  submission:
    tree_root: true
    description: >-
      A grouping entity that represents information about one or more entities.
      A submission can be considered as a set of inter-related (and inter-connected)
      entities that represent a data submission to GHGA.
    slots:
      - has sample
      - has experiment
      - has file
      - has dataset

    slot_usage:
      has sample:
        description: >-
          Information about one or more Sample entities associated with this submission.
        range: sample
        multivalued: true
        inlined: true
        inlined_as_list: true
      has experiment:
        description: >-
          Information about one or more Experiment entities associated with this submission.
        range: experiment
        multivalued: true
        required: true
        inlined: true
        inlined_as_list: true
      has file:
        description: >-
          Information about one or more File entities associated with this submission.
        range: file
        multivalued: true
        inlined: true
        inlined_as_list: true
      has dataset:
        description: >-
          One or more Dataset that are part of this submission.
        range: dataset
        multivalued: true
        inlined: true
        inlined_as_list: true

slots:
  accession:
    description: An identifier used to access this entity.
    identifier: true

  name:
    description: >-
      An entity name.

  alias:
    description: The alias for an entity.

  type:
    description: The type of an entity.
    # Note: Not to be confused with rdf:type

  description:
    description: Description of an entity.

  has sample:
    description: The sample associated with an entity.
    range: sample
    required: true

  has experiment:
    description: The experiment associated with an entity.
    range: experiment

  has file:
    description: >-
      The file associated with an entity.
    range: file

  has dataset:
    description: The Dataset associated with an entity.
    range: dataset

  filename:
    description: >-
      The given filename.

  format:
    description: >-
      The format of the file: BAM, SAM, CRAM, BAI, etc.
    range: file format enum

  size:
    description: The size of a file in bytes.
    range: integer

  checksum:
    description: >-
      A computed value which depends on the contents of a block of data and which is transmitted or
      stored along with the data in order to detect corruption of the data.
      The receiving system recomputes the checksum based upon the received data and compares this
      value with the one sent with the data. If the two values are the same, the receiver has some confidence
      that the data was received correctly.

enums:
  file format enum:
    description: >-
      Enum to capture file types.
    permissible_values:
      bam:
        description: BAM File
      complete_genomics:
        description: Complete Genomics File
      cram:
        description: CRAM File
      fasta:
        description: Fasta File
      fastq:
        description: FastQ File
      pacbio_hdf5:
        description: PacBio HDF5 File
      sff:
        description: >-
          Standard flowgram format used to encode results
          of pyrosequencing from the 454 Life Sciences platform.
      srf:
        description: >-
          SRF is a generic format for DNA sequence data.
      vcf:
        description: >-
          VCF file for storing gene sequence variations.
      txt:
        description: >-
          Text file.
      pxf:
        description: >-
          Phenopacket file.
      other:
        description: >-
          Other format.
