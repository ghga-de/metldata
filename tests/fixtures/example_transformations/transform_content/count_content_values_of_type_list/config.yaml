class_name: Dataset
content_schema:
  {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "additionalProperties": false,
    "description": "A dataset that is a collection of files.",
    "properties":
      {
        "dac_contact": { "type": "string" },
        "individual_summary":
          {
            "type": "object",
            "additionalProperties": false,
            "properties":
              {
                "phenotypes":
                  { "type": "object", "additionalProperties": true },
              },
            "required": ["phenotypes"],
          },
      },
    "required": ["individual_summary"],
    "type": "object",
  }
content_template_yaml: |
  dac_contact: {{ original.dac_contact }}
  individual_summary:
    phenotypes:
      {% set term_counts = {} %}
      {% for individual in original.individuals %}
          {% for term in individual.phenotypes %}
              {% set _ = term_counts.update({term: term_counts.get(term, 0) + 1}) %}
          {% endfor %}
      {% endfor %}
      {% for term, count in term_counts.items() %}
      {{ term }} : {{ count }}
      {% endfor %}
